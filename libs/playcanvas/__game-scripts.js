var CameraPath=pc.createScript("cameraPath");CameraPath.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),CameraPath.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),CameraPath.attributes.add("pathRoot",{type:"entity",title:"Path Root"}),CameraPath.attributes.add("duration",{type:"number",default:0,title:"Duration Secs"}),CameraPath.attributes.add("startTime",{type:"number",default:10,title:"Start Time (Secs)",description:"Start the path from a specific point in time"}),CameraPath.prototype.initialize=function(){this.createPath(),this.on("attr:pathRoot",(function(t,i){t&&(this.createPath(),this.time=0)})),this.on("attr:time",(function(t,i){this.time=pc.math.clamp(this.startTime,0,this.duration)})),this.time=pc.math.clamp(this.startTime,0,this.duration),this.lookAt=new pc.Vec3,this.up=new pc.Vec3,this.flyingThrough=!0},CameraPath.prototype.update=function(t){var i;this.flyingThrough?(this.time+=t,this.time>this.duration&&(this.time-=this.duration),i=this.time/this.duration):i=this.pathSlider.value/this.pathSlider.max,this.entity.setPosition(this.px.value(i),this.py.value(i),this.pz.value(i)),this.lookAt.set(this.tx.value(i),this.ty.value(i),this.tz.value(i)),this.up.set(this.ux.value(i),this.uy.value(i),this.uz.value(i)),this.entity.lookAt(this.lookAt,this.up)},CameraPath.prototype.createPath=function(){var t=pc.CURVE_CARDINAL;this.px=new pc.Curve,this.px.type=t,this.py=new pc.Curve,this.py.type=t,this.pz=new pc.Curve,this.pz.type=t,this.tx=new pc.Curve,this.tx.type=t,this.ty=new pc.Curve,this.ty.type=t,this.tz=new pc.Curve,this.tz.type=t,this.ux=new pc.Curve,this.ux.type=t,this.uy=new pc.Curve,this.uy.type=t,this.uz=new pc.Curve,this.uz.type=t;var e=this.pathRoot.children,a=0,s=[],h=new pc.Vec3;for(s.push(0),i=1;i<e.length;i++){var p=e[i-1],r=e[i];h.sub2(p.getPosition(),r.getPosition()),a+=h.length(),s.push(a)}for(i=0;i<e.length;i++){var u=s[i]/a,o=e[i],n=o.getPosition();this.px.add(u,n.x),this.py.add(u,n.y),this.pz.add(u,n.z);var d=n.clone().add(o.forward);this.tx.add(u,d.x),this.ty.add(u,d.y),this.tz.add(u,d.z);var c=o.up;this.ux.add(u,c.x),this.uy.add(u,c.y),this.uz.add(u,c.z)}};